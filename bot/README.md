# MedAI Telegram Bot

Телеграм-бот для работы с системой MedAI, позволяющий клиникам регистрироваться и работать со звонками.

## Структура проекта

```
bot/
├── __init__.py         # Инициализация пакета
├── __main__.py         # Точка входа для бота
├── config/             # Конфигурационные файлы
├── models/             # Модели данных и работа с базой данных
├── handlers/           # Обработчики команд и сообщений
├── middlewares/        # Промежуточные обработчики
├── keyboards/          # Клавиатуры
├── utils/              # Вспомогательные функции
├── filters/            # Пользовательские фильтры
└── states/             # Классы-определения состояний FSM
```

## Возможности бота

- Регистрация новой клиники в системе MedAI
- Получение списка звонков по дате
- Скачивание записей звонков
- Транскрибация звонков
- Анализ звонков с помощью нейросети
- Создание отчетов по звонкам

## Требования

- Python 3.8+
- MongoDB
- aiogram 3.x

## Запуск

```bash
# Запуск из корня проекта
python -m bot

# Или запуск напрямую
cd bot
python __main__.py
```

## Основные команды бота

- `/start` - Начало работы с ботом
- `/register` - Регистрация новой клиники
- `/leads` - Получение звонков по дате
- `/profile` - Информация о профиле и привязанных клиниках
- `/cancel` - Отмена текущей операции

## Регистрация клиники

Процесс регистрации клиники включает следующие шаги:

1. Название клиники
2. Поддомен AmoCRM
3. Client ID
4. Client Secret
5. Redirect URL
6. Auth Code
7. AmoCRM Pipeline ID
8. Месячный лимит

## Работа со звонками

Для работы со звонками необходимо:

1. Выбрать дату
2. Выбрать client_id клиники
3. Выбрать действие (скачать, транскрибировать, проанализировать, создать отчет)

## Разработка

Бот разработан с использованием современной версии библиотеки aiogram 3.x с использованием Finite State Machine (FSM) для управления состояниями диалогов.
